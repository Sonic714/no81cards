--神造遗物的崩落
function c72409160.initial_effect(c)
	--Activate
	local e1=Effect.CreateEffect(c)
	e1:SetCategory(CATEGORY_TODECK+CATEGORY_DRAW)
	e1:SetType(EFFECT_TYPE_ACTIVATE)
	e1:SetProperty(EFFECT_FLAG_CARD_TARGET)
	e1:SetCode(EVENT_FREE_CHAIN)
	e1:SetHintTiming(0,TIMINGS_CHECK_MONSTER+TIMING_END_PHASE)
	e1:SetCountLimit(1,72409160+EFFECT_COUNT_CODE_DUEL+EFFECT_COUNT_CODE_OATH)
	e1:SetCondition(c72409160.condition)
	e1:SetTarget(c72409160.target)
	e1:SetOperation(c72409160.activate)
	c:RegisterEffect(e1)
end
function c72409160.confilter(c)
	return c:IsSetCard(0xe729) and c:GetOriginalLevel()==3
end
function c72409160.targetfilter(c)
	return c:IsCode(72409000)
end
function c72409160.eqfilter(c)
	return c:IsCode(72409050)
end
function c72409160.tdfilter1(c)
	return (c:IsFaceup() and c:IsType(TYPE_PENDULUM)) and c:IsAbleToDeck()
end
function c72409160.tdfilter2(c)
	return c:IsLocation(LOCATION_REMOVED) and c:IsAbleToDeck()
end
function c72409160.tdfilter3(c)
	return c:IsLocation(LOCATION_GRAVE) and c:IsAbleToDeck()
end
function c72409160.tdfilter4(c)
	return c:IsLocation(LOCATION_HAND) and c:IsAbleToDeck()
end
function c72409160.tdfilter5(c)
	return c:IsLocation(LOCATION_ONFIELD) and c:IsAbleToDeck()
end
function c72409160.condition(e,tp,eg,ep,ev,re,r,rp)
	return Duel.GetLP(tp)<=1000 and Duel.IsExistingMatchingCard(c72409160.confilter,tp,LOCATION_MZONE,0,1,nil)
end
function c72409160.target(e,tp,eg,ep,ev,re,r,rp,chk,chkc)
	if chkc then return chkc:IsLocation(LOCATION_MZONE) and chkc:IsControler(tp) and c72409160.targetfilter(chkc) end
	if chk==0 then return Duel.IsExistingTarget(c72409160.targetfilter,tp,LOCATION_MZONE,0,1,nil) end
	Duel.Hint(HINT_SELECTMSG,tp,HINTMSG_SELF)
	local g=Duel.SelectTarget(tp,c72409160.targetfilter,tp,LOCATION_MZONE,0,1,1,nil)
		if e:IsHasType(EFFECT_TYPE_ACTIVATE) then
		Duel.SetChainLimit(aux.FALSE)
		end
end
function c72409160.activate(e,tp,eg,ep,ev,re,r,rp)
	local ca1=e:GetOwner()
	local ca2=Duel.GetFirstTarget()
	local ca=Group.__add(ca1,ca2)
	local g1=Duel.GetMatchingGroup(c72409160.tdfilter1,tp,0x7e,0,ca)
	local g2=Duel.GetMatchingGroup(c72409160.tdfilter2,tp,0x7e,0,ca)
	local g3=Duel.GetMatchingGroup(c72409160.tdfilter3,tp,0x7e,0,ca)
	local g4=Duel.GetMatchingGroup(c72409160.tdfilter4,tp,0x7e,0,ca)
	local g5=Duel.GetMatchingGroup(c72409160.tdfilter5,tp,0x7e,0,ca)
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,9)) 
	local opt=Duel.SelectOption(tp,aux.Stringid(72409161,10))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,11))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,12))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,13))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,14))
	local opt=Duel.SelectOption(tp,aux.Stringid(72409161,15))
	Duel.SendtoDeck(g1,nil,2,REASON_EFFECT)
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,6))
	local opt=Duel.SelectOption(tp,aux.Stringid(72409160,2))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,7))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,8))
	Duel.SendtoDeck(g2,nil,2,REASON_EFFECT)
	local opt=Duel.SelectOption(tp,aux.Stringid(72409160,0))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,9))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,10))
	Duel.SendtoDeck(g3,nil,2,REASON_EFFECT)
	local opt=Duel.SelectOption(tp,aux.Stringid(72409160,0))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,8))  
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,11))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,12))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,13))
	Duel.SendtoDeck(g4,nil,2,REASON_EFFECT)
	local opt=Duel.SelectOption(tp,aux.Stringid(72409160,0))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,14))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,15))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,0))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,1))
	Duel.SendtoDeck(g5,nil,2,REASON_EFFECT)
	local opt=Duel.SelectOption(tp,aux.Stringid(72409160,3))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,2))
	local opt=Duel.SelectOption(tp,aux.Stringid(72409160,4))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,3))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,4))
	Duel.Draw(tp,5,REASON_EFFECT)
	local opt=Duel.SelectOption(tp,aux.Stringid(72409160,5))
	Duel.SetLP(tp,8000)
	local opt=Duel.SelectOption(tp,aux.Stringid(72409161,5))
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,7)) 
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409161,6))   
		local e3=Effect.CreateEffect(e:GetOwner())
		e3:SetType(EFFECT_TYPE_FIELD)
		e3:SetCode(EFFECT_CHANGE_DAMAGE)
		e3:SetProperty(EFFECT_FLAG_PLAYER_TARGET)
		e3:SetTargetRange(1,0)
		e3:SetValue(0)
		e3:SetReset(RESET_PHASE+PHASE_END)
		Duel.RegisterEffect(e3,tp)
		local e4=e3:Clone()
		e4:SetCode(EFFECT_NO_EFFECT_DAMAGE)
		e4:SetReset(RESET_PHASE+PHASE_END)
		Duel.RegisterEffect(e4,tp)
	Duel.Hint(HINT_MESSAGE,tp,aux.Stringid(72409160,1))
	if Duel.IsExistingMatchingCard(c72409160.eqfilter,tp,LOCATION_DECK,0,1,nil)  then 
	Duel.Hint(HINT_SELECTMSG,tp,HINTMSG_EQUIP)
	local geq=Duel.SelectMatchingCard(tp,c72409160.eqfilter,tp,LOCATION_DECK,0,1,1,nil)
	local tg=geq:GetFirst()
	Duel.Equip(tp,tg,ca2)
	end
end